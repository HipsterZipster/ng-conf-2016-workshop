<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
     <title>Isolating and Improving performance in Angular 1 Applications</title>
       <style>
body {
  font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
}

h1, h2, h3 {
  font-weight: 400;
  margin-bottom: 0;
}

.remark-slide > div.top {
  vertical-align: top;
}

.remark-slide > div {
  vertical-align: middle;
}
.remark-slide-content h1 { font-size: 3em; }
.remark-slide-content h2 { font-size: 2em; }
.remark-slide-content h3 { font-size: 1.6em; }

.footnote {
  position: absolute;
  bottom: 3em;
}

.twitter > img,
.github > img {
  height: 20px;
  vertical-align: middle;
}

.patterns > img {
  height: 500px;
}

.fullImage > img {
  width: 755px;
}

.trackby > img {
  width: 755px;
}

/* Two-column layout */
.left-column {
  color: #777;
  width: 20%;
  height: 92%;
  float: left;
}

.left-column h2:last-of-type, .left-column h3:last-child {
  color: #000;
}

.right-column {
  width: 75%;
  float: right;
}

.huge {
  font-size: 2.5em;
}
    </style>
  </head>
  <body>
    <textarea id="source">

class: center

# Isolating and Improving performance in Angular 1 Applications
### Winning SPARS with Angular

```
git clone https://github.com/taylor1791/ng-conf-2016-workshop.git
cd ng-conf-2016-workshop
npm install
```

.footnote[
  Taylor Everding
  .github[![Github](../slides/img/github.png)] Taylor1791
  .twitter[![Twitter](../slides/img/twitter.png)] @raisdead
]

???

Raise your hand if you have worked on an angular 1 app.

Keep your hand raised if you encountered front-end performance problems on an angular app?

If you were at least a little nervous the first time you had to redress the problems.

I was, I hope to give you the tools to address the issues without feeling the fear that I had.

---

.left-column[
  ## Goals

  ### Tips
]
.right-column[
  ## `\(n\)` Weird Tricks to Improve your Performance that Really Work!
  .weirdTrick[![Weird Tricks](img/one-weird-trick.jpg)]
]

???

Give you tips and tricks that anyone developers of all skill levels can take home and put in their application with minimal effort.

---

.left-column[
  ## Goals

  ### Tips
  ### Dev Tools
]
.right-column[
  ## Become Comfortable using JavaScript Profiler on Angular
  .angularJavascript[![Angular is JavaScript](img/angular-javascript.jpg)]
]

???

Angular is a powerful abstraction from JavaScript. But it is sill JavaScript.

Everything we use debug performance in JavaScript still applies.

---

.left-column[
  ## Goals

  ### Tips
  ### Dev Tools
  ### Patterns
]
.right-column[
  ## Identify Patterns that may Cause Performance Problems
  .patterns[![Patters](img/illusion.jpg)]
]

???

Later in workshop, identify and fix issues in a real application.

After seeing examples of when performance arise, it makes it easier to identify future problems

---

.left-column[
  ## Goals

  ### Tips
  ### Dev Tools
  ### Patterns
  ### Attitude
]
.right-column[
  ### Develop a Performance Attitude
  .attitude[![Performance Attitude](img/attitude.jpg)]
]

???


Constant thought about how code works at scale.

The best way to fix performance issues, is to prevent them

...

Questions?

Let's take care of the first goal

---

## Simple Tricks 1: Always upgrade angular

.fullImage[![Angular 1.5.5/1.5.1 Changelog](img/changelog.png)]

???

Angular team works hard to make angular as fast as possible

Document performance improvements of every release in the change log.

May not understand, but you don't have too!

---

## Simple Tricks 2: Disable Debug Data

.fullImage[![Disable Debug Information](img/disable-debug.png)]

???

Attaches information about scopes to DOM elements.

Disable it!

The minified angular disabled Debug info automatically

---

## Simple Tricks 3: Bundle JavaScript

.fullImage[![Too many JS files](img/many-js.png)]

???

Found in the wild

Directives `template` and `templateUrl`

Automatically add template cache or use `template`

---

## Simple Tricks 4: Always use `track by`

.fullImage[![track by](img/track-by.png)]

???

Track by helps avoid angular rebuilding dom nodes when reordering

---

## Simple Tricks 5: Don't duplicate AJAX

.fullImage[![duplicate ajax](img/duplicate-ajax.png)]

???

It is really easy if ajax in watch or using `ng-repeat`
Maybe easier to do this at the interceptor level or something like memoize.
What is memoization?

---

## Simple Tricks 6: Limit simultaneous AJAX

.fullImage[![many ajax](img/many-ajax.png)]

---

## Simple Tricks 6 (Cont)

.fullImage[![aggregator](img/aggregator.png)]

---

## Simple Tricks 7: Bocking the event loop

.fullImage[![block event loop](img/block-event-loop.png)]

.fullImage[![Watchers](img/watchers.png)]

???

Been on a website and click something, nothing happens, again. same. Then 3 happen?

Sneak up on you when services return many results or client says how many.

---

.fullImage[![That's all](img/thats-all.gif)]

???

You may feel like this.

We have more.

Questions?

---

.fullImage[![Blind](img/blind.gif)]

???

I have a question for you. Have you ever done a long jump blind?

What its like to try to improve performance blind.

Need to have some sort of base line.

Manual timing doesn't cut it
 - one measurement
 - one machine

Most analytics tools are not build for SPA.

---

.fullImage[![Gmail](img/gmail.png)]

???

Take gmail

Are you confident that your analytics solution provides the time the users actually feels like th page is done?

Let's assume you have a really good one and it works.

What about route changes?

---

.fullImage[![Gmail Stars](img/gmail-starred.png)]

???

Route Changes

Controller instantiated and makes ajax request

Route change complete

---

.fullImage[![Gmail Stars](img/gmail-loading.png)]

???

Does your analytics solution provide this?

We built our own. On the drawing board.

---

.fullImage[![Timeline](img/stabilize.png)]

???

Horizontal Axis is time

Vertical Axis is depth of function calls (pretty much irrelevant)

Does provide stack trace with function names.

---

.fullImage[![Timeline Stabilization](img/stabilize-point.png)]

???
Digests: watcher
AJAX: $httpInterceptros
DOM Mutations: DOM Mutation Observers/DOM Mutation Events

---

class: center

# Route Stabilization

---

.fullImage[![Timeline Stabilization](img/stabilization-graph.png)]

???

This is the top 8 visited pages on our site.

Vertical axis is the time and horizontal axis is the date. Over a week.

Which are the slowest, and by how much, most variation, and much more.

Make decisions and where to spend time.

---

.fullImage[![Performance Regression](img/perf-regression.png)]

???

This was an extra ajax request.

Allows us to see impact on real users, in near real time.

---

.fullImage[![Awesom](img/dancing.gif)]

???

Questions about RS or its purpose?

---

.huge[
 > ".. about 97% of the time *premature optimization is the root of all evil*." - Donald Knuth
]

???

Changed my life

Real world problem.

YAGNI

---

class: top

## Performance Improvement Process

&nbsp;

.right-column[
  ### 1) A real-world problem exists
]

???

Some business don't benefit from improving performance. B2B.

Make sure there is a business case for it.

Users complaining, evidence to increase your sales

---

class: top

## Performance Improvement Process

&nbsp;

.right-column[
  ### 1) A real-world problem exists
  ### 2) Establish a base line
]

???

Route stabalization

---
class: top

## Performance Improvement Process

&nbsp;

.right-column[
  ### 1) A real-world problem exists
  ### 2) Establish a base line
  ### 3) Reduce the biggest contributer
]

???

big stones -> biggest potential improvement

---
class: top

## Performance Improvement Process

&nbsp;

.right-column[
  ### 1) A real-world problem exists
  ### 2) Establish a base line
  ### 3) Reduce the biggest contributer
  ### 4) Measure and assess
]

---

# Workshop

```
git clone https://github.com/taylor1791/ng-conf-2016-workshop.git
cd ng-conf-2016-workshop
npm install
```

???

    </textarea>

    <script src="http://gnab.github.io/remark/downloads/remark-latest.min.js"></script>

    <script src='https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

    <script>
      var slideshow = remark.create();

      // Setup MathJax
      MathJax.Hub.Config({
        tex2jax: {
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
        }
      });

      MathJax.Hub.Configured();
    </script>
    <script></script>
  </body>
</html>

